ratprint: false$

declare ("'", alphabetic)$
depends( [ x , y , qa , q0 , q1 , q2 ] , t)$

load ("f90")$
f90_output_line_length_max:10000000$
showmatf90(m):= for i thru length(m) do
    for j thru length(transpose(m)) do
    block([], printf(true,"[~d][~d] = ", i-1,j-1), f90(m[i][j]))$

symbolilze(M):= subst([ diff(x,t,2)=ddx
                      , diff(y,t,2)=ddy
                      , diff(qa,t,2)=ddqa
                      , diff(q0,t,2)=ddq0
                      , diff(q1,t,2)=ddq1
                      , diff(q2,t,2)=ddq2
                      , diff(x,t,1)=dx
                      , diff(y,t,1)=dy
                      , diff(qa,t,1)=dqa
                      , diff(q0,t,1)=dq0
                      , diff(q1,t,1)=dq1
                      , diff(q2,t,1)=dq2
                    ], M)$

lstick: 0.83$
lshin: 0.4$
lthigh: 0.5$
lubody: 0.5$
mfoot: 5$
mstick: 7$
mshin: 10$
mthigh: 30$
mubody: 40$
g: 9.81$


X : [ x , y , qa , q0 , q1 , q2 ] $
dX : [ dx , dy , dqa , dq0 , dq1 , dq2 ] $
ddX : [ ddx , ddy , ddqa , ddq0 , ddq1 , ddq2 ] $

H: trigsimp(matrix(
[                                                                                                                                                                                                                                                                                                                                                                             (mstick + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*sin(q0)**2 + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*cos(q0)**2)*sin(qa)**2 + (mstick + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*sin(q0)**2 + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*cos(q0)**2)*cos(qa)**2,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0, -((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*sin(qa) - (lstick*mstick/2 + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*cos(qa), -((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*sin(qa), -(-(-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0))*sin(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0))*cos(qa), -(-(-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*sin(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*cos(q0))*sin(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*cos(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*sin(q0))*cos(qa)],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0,                                                                                                                                                                                                                                                                                                                                                                             (mstick + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*sin(q0)**2 + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*cos(q0)**2)*sin(qa)**2 + (mstick + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*sin(q0)**2 + (mshin + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + (mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2)*cos(q0)**2)*cos(qa)**2,  ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*cos(qa) - (lstick*mstick/2 + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*sin(qa), -((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*sin(qa) + ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*cos(qa),  (-(-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0))*sin(qa),  (-(-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*sin(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*cos(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*sin(q0))*sin(qa)],
[-((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*sin(qa) - (lstick*mstick/2 + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*cos(qa), ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*cos(qa) - (lstick*mstick/2 + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*sin(qa),                                                                                                                                                                                                                                                                                                                lshin**2*mshin/4 - lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1) + lthigh*mubody*sin(q2)*cos(q2) - (lthigh*mubody*cos(q2) + lubody*mubody/2)*sin(q2))*sin(q1) + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1) + lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + (lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2))*cos(q1) + lstick**2*mstick/4 + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                   lshin**2*mshin/4 - lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1) + lthigh*mubody*sin(q2)*cos(q2) - (lthigh*mubody*cos(q2) + lubody*mubody/2)*sin(q2))*sin(q1) + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1) + lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + (lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2))*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                        -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                               -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*lubody*mubody*cos(q1)*cos(q2)/2 + lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4],
[                  -((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*sin(qa),                  -((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0) + (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0))*sin(qa) + ((-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0) - (lshin*mshin/2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1)**2 + lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1)**2 - lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0))*cos(qa),                                                                                                                                                                                                                                                                                                                                     lshin**2*mshin/4 - lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1) + lthigh*mubody*sin(q2)*cos(q2) - (lthigh*mubody*cos(q2) + lubody*mubody/2)*sin(q2))*sin(q1) + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1) + lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + (lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2))*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                   lshin**2*mshin/4 - lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*sin(q1) + lthigh*mubody*sin(q2)*cos(q2) - (lthigh*mubody*cos(q2) + lubody*mubody/2)*sin(q2))*sin(q1) + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lshin*(lshin*(mthigh + mubody*sin(q2)**2 + mubody*cos(q2)**2)*cos(q1) + lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + (lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2))*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                        -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                               -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*lubody*mubody*cos(q1)*cos(q2)/2 + lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4],
[                                                                                                                                                                                                                                                                                                                                                                   -(-(-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0))*sin(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0))*cos(qa),                                                                                                                                                                                                                                                                                                                                                                    (-(-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*sin(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1))*cos(q0) + (-lubody*mubody*sin(q2)*cos(q1)/2 - (lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*sin(q1))*sin(q0))*sin(qa),                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*(lthigh*mthigh/2 + lthigh*mubody*sin(q2)**2 + lthigh*mubody*cos(q2)**2 + lubody*mubody*cos(q2)/2)*cos(q1) + lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     lthigh**2*mthigh/4 + lthigh**2*mubody*sin(q2)**2 + lthigh*lubody*mubody*cos(q2)/2 + lthigh*(lthigh*mubody*cos(q2) + lubody*mubody/2)*cos(q2) + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                            lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -(-(-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*sin(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*cos(q0))*sin(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*cos(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*sin(q0))*cos(qa),                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    (-(-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*sin(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*cos(q0))*cos(qa) - ((-lubody*mubody*sin(q1)*sin(q2)/2 + lubody*mubody*cos(q1)*cos(q2)/2)*cos(q0) + (-lubody*mubody*sin(q1)*cos(q2)/2 - lubody*mubody*sin(q2)*cos(q1)/2)*sin(q0))*sin(qa),                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*lubody*mubody*cos(q1)*cos(q2)/2 + lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                -lshin*lubody*mubody*sin(q1)*sin(q2)/2 + lshin*lubody*mubody*cos(q1)*cos(q2)/2 + lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            lthigh*lubody*mubody*cos(q2)/2 + lubody**2*mubody/4,                                                                                                                                                                                                                                                                                                                                                                                                lubody**2*mubody/4]
))$

rhs: trigsimp(matrix(
[ (fx*sin(qa) - fy*cos(qa) + g*mstick*cos(qa) - lstick*mstick*dqa**2/2 - (g*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0)) + mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0)) + (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1))*sin(q0) + (g*mshin*(-sin(q0)*sin(qa) + cos(q0)*cos(qa)) + lshin*mshin*(-dq0 - dqa)*(dq0 + dqa)/2 + mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*(-dq0 - dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0)) - (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*sin(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*cos(q1))*cos(q0))*sin(qa) + (fx*cos(qa) + fy*sin(qa) - g*mstick*sin(qa) + mstick*(-dx*sin(qa) + dy*cos(qa))*dqa + mstick*(dx*sin(qa) - dy*cos(qa))*dqa + (g*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0)) + mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0)) + (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1))*cos(q0) + (g*mshin*(-sin(q0)*sin(qa) + cos(q0)*cos(qa)) + lshin*mshin*(-dq0 - dqa)*(dq0 + dqa)/2 + mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*(-dq0 - dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0)) - (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*sin(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*cos(q1))*sin(q0))*cos(qa)],
[-(fx*sin(qa) - fy*cos(qa) + g*mstick*cos(qa) - lstick*mstick*dqa**2/2 - (g*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0)) + mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0)) + (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1))*sin(q0) + (g*mshin*(-sin(q0)*sin(qa) + cos(q0)*cos(qa)) + lshin*mshin*(-dq0 - dqa)*(dq0 + dqa)/2 + mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*(-dq0 - dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0)) - (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*sin(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*cos(q1))*cos(q0))*cos(qa) + (fx*cos(qa) + fy*sin(qa) - g*mstick*sin(qa) + mstick*(-dx*sin(qa) + dy*cos(qa))*dqa + mstick*(dx*sin(qa) - dy*cos(qa))*dqa + (g*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0)) + mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0)) + (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1))*cos(q0) + (g*mshin*(-sin(q0)*sin(qa) + cos(q0)*cos(qa)) + lshin*mshin*(-dq0 - dqa)*(dq0 + dqa)/2 + mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*(-dq0 - dqa) + mshin*((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0)) - (g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*sin(q1) + (g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*cos(q1))*sin(q0))*sin(qa)],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        cpx*fy - cpy*fx + fx*((-x*sin(qa) + y*cos(qa))*cos(qa) + (x*cos(qa) + y*sin(qa))*sin(qa)) + fy*((-x*sin(qa) + y*cos(qa))*sin(qa) - (x*cos(qa) + y*sin(qa))*cos(qa)) - g*lshin*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0))/2 + g*lstick*mstick*sin(qa)/2 - g*lthigh*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))/2 - g*lubody*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2))/2 - lshin*mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa)/2 - lshin*mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))/2 - lshin*(g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) - lshin*(g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1) - lstick*mstick*(-dx*sin(qa) + dy*cos(qa))*dqa/2 - lstick*mstick*(dx*sin(qa) - dy*cos(qa))*dqa/2 - lthigh*mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)/2 - lthigh*mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa)/2 - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2) - lubody*mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2)/2 - lubody*mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa)/2 - mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0)) - mshin*((-dx*sin(qa) + dy*cos(qa))*sin(q0) - (-dx*cos(qa) - dy*sin(qa))*cos(q0))*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0)) - mstick*(-dx*sin(qa) + dy*cos(qa))*(-dx*cos(qa) - dy*sin(qa)) - mstick*(-dx*sin(qa) + dy*cos(qa))*(dx*cos(qa) + dy*sin(qa)) - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(-lshin*(dq0 + dqa)*cos(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(-lthigh*(dq0 + dq1 + dqa)*cos(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          cf0 - g*lshin*mshin*(-sin(q0)*cos(qa) - sin(qa)*cos(q0))/2 - g*lthigh*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))/2 - g*lubody*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2))/2 - lshin*mshin*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*(dq0 + dqa)/2 - lshin*mshin*((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))/2 - lshin*(g*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1)) + mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2))*cos(q1) - lshin*(g*mthigh*((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1)) + lthigh*mthigh*(-dq0 - dq1 - dqa)*(dq0 + dq1 + dqa)/2 + mthigh*(((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1) + mthigh*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*(-dq0 - dq1 - dqa) - (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*sin(q2) + (g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*cos(q2))*sin(q1) - lthigh*mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)/2 - lthigh*mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa)/2 - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2) - lubody*mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2)/2 - lubody*mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa)/2 - mshin*(-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0)) - mshin*((-dx*sin(qa) + dy*cos(qa))*sin(q0) - (-dx*cos(qa) - dy*sin(qa))*cos(q0))*((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0)) - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(-lshin*(dq0 + dqa)*cos(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(-lthigh*(dq0 + dq1 + dqa)*cos(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) + u0],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              cf1 - g*lthigh*mthigh*(-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))/2 - g*lubody*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2))/2 - lthigh*mthigh*(-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)/2 - lthigh*mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(dq0 + dq1 + dqa)/2 - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2)) + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa))*cos(q2) - lthigh*(g*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*sin(q2) + ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*cos(q2)) + lubody*mubody*(-dq0 - dq1 - dq2 - dqa)*(dq0 + dq1 + dq2 + dqa)/2 + mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*sin(q2) + (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*cos(q2) + (lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*dq2) + mubody*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2))*(-dq0 - dq1 - dq2 - dqa))*sin(q2) - lubody*mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2)/2 - lubody*mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa)/2 - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(-lshin*(dq0 + dqa)*cos(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mthigh*(lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*(lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(-lthigh*(dq0 + dq1 + dqa)*cos(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) + u1],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   cf2 - g*lubody*mubody*((-(-sin(q0)*sin(qa) + cos(q0)*cos(qa))*sin(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*cos(q1))*cos(q2) - ((-sin(q0)*sin(qa) + cos(q0)*cos(qa))*cos(q1) + (-sin(q0)*cos(qa) - sin(qa)*cos(q0))*sin(q1))*sin(q2))/2 - lubody*mubody*((-((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*sin(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*cos(q1) + (-lshin*(dq0 + dqa)*sin(q1) - (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*dq1)*cos(q2) - (((-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*dqa*cos(q0))*cos(q1) + ((-(-dx*sin(qa) + dy*cos(qa))*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*sin(q0))*dq0 + (dx*sin(qa) - dy*cos(qa))*dqa*cos(q0) - (-dx*cos(qa) - dy*sin(qa))*dqa*sin(q0))*sin(q1) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*dq1)*sin(q2) + (-lthigh*(dq0 + dq1 + dqa)*sin(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*dq2)/2 - lubody*mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(dq0 + dq1 + dq2 + dqa)/2 - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(-lthigh*(dq0 + dq1 + dqa)*cos(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) - (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) - mubody*(lthigh*(dq0 + dq1 + dqa)*sin(q2) + (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*cos(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*sin(q2))*(lthigh*(dq0 + dq1 + dqa)*cos(q2) - (lshin*(dq0 + dqa)*sin(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*sin(q1) + ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*cos(q1))*sin(q2) + (lshin*(dq0 + dqa)*cos(q1) + (-(-dx*sin(qa) + dy*cos(qa))*sin(q0) + (-dx*cos(qa) - dy*sin(qa))*cos(q0))*cos(q1) - ((-dx*sin(qa) + dy*cos(qa))*cos(q0) + (-dx*cos(qa) - dy*sin(qa))*sin(q0))*sin(q1))*cos(q2)) + u2]
))$
lhs: H . ddX$
lhs[1] - rhs[1];

rep(M):= subst([ca**2=cas, sa**2=sas, c1**2=c1s, c2**2=c2s, s1**2=s1s, s2**2=s2s], subst([ cos(q0) = c0
               , sin(qa) = sa
               , cos(qa) = ca
               , sin(q0) = s0
               , cos(q1) = c1
               , sin(q1) = s1
               , cos(q2) = c2
               , sin(q2) = s2
                    ], M))$

solxy: ratsimp(trigsimp(ratsimp(solve([lhs[1][1] - rhs[1][1] = 0, lhs[2][1] - rhs[2][1] = 0], [ddx, ddy]))));
neweq: subst(solxy, ratsimp(lhs - rhs))$
/* check coefficient */
/*
A:jacobian(args(neweq), [ddqa , ddq0 , ddq1 , ddq2 ])$
showmatf90(ratsimp(trigsimp(ratsimp(A))))$
*/

solq2: solve(ratsimp(trigsimp(ratsimp(neweq[6][1]))), [ddq2]);
neweq2: subst(solq2, ratsimp(neweq))$
showmatf90(neweq2)$
f90(rep(solxy))$
f90(rep(solq2))$

/*
remaining: submatrix(1,2,6, neweq2)$
A:jacobian(args(remaining), [ddqa , ddq0 , ddq1])$
Am:rep(ratsimp(trigsimp(ratsimp(A))))$
showmatf90(Am)$
bm:rep(expand(remaining - A.transpose(matrix([ddqa , ddq0 , ddq1]))))$
showmatf90(bm)$
*/




/*
showmatf90(ratsimp(trigsimp(ratsimp(N*A))))$
showmatf90(expand(ratsimp(trigsimp(ratsimp(subst([q0=0, q1=0, q2=0], N*A))))))$
showmatf90(expand(ratsimp(trigsimp(ratsimp(subst([q0=%pi/2, q1=%pi/2, q2=%pi/2], N*A))))))$
*/
/*
ratsimp(trigsimp(ratsimp(solve([remaining[1][1] = 0, remaining[2][1] = 0, remaining[3][1] = 0], [ddqa, ddq0, ddq1]))));
*/



